# AI Engine - Critical Features Roadmap

This document outlines the implementation plan for the critical missing features required to fulfill the vision of an intelligent, user-friendly AI automation platform. The roadmap is divided into four distinct phases, prioritizing the core user experience first.

---

## üéØ Phase 1: Visual Workflow Editor & Live Recording Experience

**Priority:** üî• **CRITICAL**  
**Timeline:** 2-3 Weeks  
**Goal:** To build the core interactive user interface where users can see their recorded actions transformed into an editable, visual workflow in real-time. This phase bridges the gap between the recording agent and a usable automation.

| Deliverable | Priority | Technical Requirements & Implementation Notes |
| :--- | :--- | :--- |
| **1.1. Real-time Action Box Generation** | High | - **Backend:** Enhance the `AILearningEngine` to stream structured actions (title, description, confidence) via WebSockets as the recording progresses. <br> - **Frontend:** The React UI will listen to the WebSocket and dynamically render new "Action Step Box" components onto the canvas as they are generated. |
| **1.2. Visual Workflow Editor Canvas** | High | - **Frontend:** Implement a drag-and-drop canvas using a library like **React Flow**. <br> - **Functionality:** Users must be able to rearrange, select, and delete the AI-generated action boxes. The initial layout will be a simple vertical flow. |
| **1.3. Action Box Editor Panel** | High | - **Frontend:** Create a properties panel that appears when a user clicks on an action box. <br> - **Functionality:** Users can edit the AI-generated `title` and `description`. Changes should be saved and reflected on the action box in real-time. This refines the AI's understanding for future learning. |
| **1.4. Scenario Branching UI** | Medium | - **Frontend:** Implement the ability to draw connections between nodes. Add distinct output "handles" on decision boxes (e.g., for "Success", "Failure", "Custom Condition"). <br> - **Backend:** The workflow model (`workflow.py`) needs to be updated to store these connections (`edges`) with scenario labels. |

---

## üß† Phase 2: Intelligent Action Boxes & LLM Integration

**Priority:** üî• **HIGH**  
**Timeline:** 2-3 Weeks (After Phase 1)  
**Goal:** To embed deep AI functionality directly into the action boxes, allowing users to configure LLM processes and manage the flow of data between steps.

| Deliverable | Priority | Technical Requirements & Implementation Notes |
| :--- | :--- | :--- |
| **2.1. Input/Process/Output UI Structure** | High | - **Frontend:** Redesign the `ActionStepNode` React component to visually represent three distinct sections: **Inputs**, **Process**, and **Outputs**. <br> - **Inputs:** Show data sources (e.g., "Output from Step 1", "External Document: invoice.pdf"). <br> - **Process:** Display the core intention (e.g., "Analyze sentiment", "Extract data"). <br> - **Outputs:** List the data generated by the step (e.g., "sentiment_score", "extracted_invoice_data"). |
| **2.2. In-UI LLM Prompt Editor** | High | - **Frontend:** Create a dedicated "LLM Process" component for the properties panel. It will include a text area for users to write or edit the prompt that the LLM will use for that step. <br> - **Backend:** The `LLMRunner` must be updated to use the user-provided prompt from the saved workflow data, instead of a hardcoded one. |
| **2.3. Context Passing Between Boxes** | High | - **Backend:** Enhance the `WorkflowEngine` to manage a `context` dictionary. The output of a step (e.g., `step1.output.extracted_data`) is added to this context. <br> - **Frontend:** The UI needs a simple way for users to reference this context in subsequent steps (e.g., using a variable format like `${step1.output.extracted_data}`). |
| **2.4. RAG Integration in UI** | Medium | - **Frontend:** In the properties panel for an LLM or RAG step, add an interface for the user to select which knowledge base documents (previously uploaded) should be used as context for that specific step. <br> - **Backend:** The `RAGEngine` needs an endpoint to list available data sources for the UI to display. |

---

## ‚ö° Phase 3: Advanced Trigger System

**Priority:** üü¢ **MEDIUM**  
**Timeline:** 2 Weeks (After Phase 2)  
**Goal:** To enable proactive, event-driven automation, allowing workflows to run automatically in response to business events.

| Deliverable | Priority | Technical Requirements & Implementation Notes |
| :--- | :--- | :--- |
| **3.1. Trigger Engine Backend** | High | - **Backend:** Implement a long-running service (`trigger_engine.py`) that can maintain persistent connections to external services. <br> - **Integrations:** Use libraries like `msal` for Microsoft Graph (Outlook) and official SDKs for other services. |
| **3.2. Email Trigger** | High | - **Functionality:** "When a new email arrives in `invoices@company.com` with a PDF attachment..." <br> - **Technical:** Requires secure OAuth2 integration with Outlook 365 or Gmail to monitor an inbox. |
| **3.3. File System Trigger** | Medium | - **Functionality:** "When a new file appears in the 'Shared/Contracts' folder..." <br> - **Technical:** Requires a local agent with file system watching capabilities (`watchdog` library) or integration with cloud storage webhooks (e.g., Google Drive, Dropbox). |
| **3.4. Webhook & Price Change Trigger** | Medium | - **Functionality:** "When a price on `amazon.com/product` changes..." or "When an external system sends a POST request..." <br> - **Technical:** The browser runner needs to be scheduled to check web pages for changes. The backend needs a generic webhook endpoint that can be configured to trigger specific workflows. |
| **3.5. Trigger Configuration UI** | High | - **Frontend:** A new section in the dashboard where users can create, configure, and manage these triggers, linking them to specific workflows. |

---

## üë®‚Äçüíº Phase 4: Admin & Enterprise Polish

**Priority:** üü¢ **MEDIUM**  
**Timeline:** 1-2 Weeks (Can be parallel)  
**Goal:** Provide administrators with the tools to manage the platform, oversee user activity, and ensure system health.

| Deliverable | Priority | Technical Requirements & Implementation Notes |
| :--- | :--- | :--- |
| **4.1. Admin Dashboard** | High | - **Frontend:** A new dashboard view visible only to users with the 'admin' role. <br> - **Metrics:** Display system-wide statistics: total workflows, number of users, successful vs. failed executions, resource usage (CPU/memory). |
| **4.2. User & Process Management** | High | - **Frontend:** Admin views to see all users and all workflows across the tenant. <br> - **Functionality:** Admins should be able to view user profiles, see their recorded actions, and inspect any workflow, but not edit them directly (to maintain ownership). |
| **4.3. Platform Controls** | Medium | - **Backend/Frontend:** Implement settings for admins to control platform-wide features, such as enabling/disabling certain runners, setting execution quotas for users, or managing API integrations centrally. |
