<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Process 13 - Interactive UI</title>
    <script src="https://unpkg.com/lucide-react@0.395.0/dist/lucide-react.js"></script>
    <style>
        :root {
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --primary: 222.2 47.4% 11.2%;
            --primary-foreground: 210 40% 98%;
            --secondary: 210 40% 96.1%;
            --secondary-foreground: 222.2 47.4% 11.2%;
            --muted: 210 40% 96.1%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --accent: 210 40% 96.1%;
            --accent-foreground: 222.2 47.4% 11.2%;
            --border: 214.3 31.8% 91.4%;
            --ring: 222.2 84% 4.9%;
            --radius: 0.5rem;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: hsl(var(--muted));
            color: hsl(var(--foreground));
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: hsl(var(--primary));
            margin-bottom: 10px;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .status-operational {
            background-color: #dcfce7;
            color: #166534;
        }

        .card {
            background-color: hsl(var(--card));
            border-radius: var(--radius);
            border: 1px solid hsl(var(--border));
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .card-header {
            padding: 20px;
            border-bottom: 1px solid hsl(var(--border));
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0;
        }

        .card-content {
            padding: 20px;
        }

        .grid {
            display: grid;
            gap: 20px;
        }

        .grid-cols-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        .button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: var(--radius);
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
        }

        .button-primary {
            background-color: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
        }

        .button-primary:hover {
            opacity: 0.9;
        }

        .button-secondary {
            background-color: hsl(var(--secondary));
            color: hsl(var(--secondary-foreground));
            border: 1px solid hsl(var(--border));
        }

        .api-test {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .api-test.success {
            background-color: #f0fdf4;
            border-color: #bbf7d0;
        }

        .api-test.error {
            background-color: #fef2f2;
            border-color: #fecaca;
        }

        .demo-section {
            margin-top: 40px;
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 10px 0;
            border-bottom: 1px solid hsl(var(--border));
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feature-list li:last-child {
            border-bottom: none;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Process 13 - AI Engine</h1>
            <div class="status-badge status-operational">
                <span>‚óè</span>
                <span id="system-status">System Operational</span>
            </div>
        </div>

        <div class="grid grid-cols-3">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üîß System Health</h3>
                </div>
                <div class="card-content">
                    <button class="button button-primary" onclick="testHealth()">
                        <span id="health-icon">üè•</span>
                        Test System Health
                    </button>
                    <div id="health-result" class="api-test" style="display: none;"></div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üöÄ Core Features</h3>
                </div>
                <div class="card-content">
                    <button class="button button-primary" onclick="testFeatures()">
                        <span id="features-icon">‚ö°</span>
                        Test Features
                    </button>
                    <div id="features-result" class="api-test" style="display: none;"></div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üìä API Status</h3>
                </div>
                <div class="card-content">
                    <button class="button button-primary" onclick="testAPI()">
                        <span id="api-icon">üîó</span>
                        Test API
                    </button>
                    <div id="api-result" class="api-test" style="display: none;"></div>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üéØ Available Demonstrations</h3>
                </div>
                <div class="card-content">
                    <div class="grid grid-cols-3">
                        <div>
                            <h4>Core Functionality</h4>
                            <button class="button button-secondary" onclick="runDemo('simple')">
                                Run Simple Demo
                            </button>
                        </div>
                        <div>
                            <h4>Advanced Testing</h4>
                            <button class="button button-secondary" onclick="runDemo('comprehensive')">
                                Run Comprehensive Test
                            </button>
                        </div>
                        <div>
                            <h4>Full Interface</h4>
                            <a href="/user_interface_preview.html" class="button button-secondary">
                                Open Full UI
                            </a>
                        </div>
                    </div>
                    <div id="demo-result" class="api-test" style="display: none;"></div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h3 class="card-title">üß™ AI Engine Features</h3>
            </div>
            <div class="card-content">
                <ul class="feature-list">
                    <li>‚úÖ AI Learning Engine - Processes raw events into structured workflows</li>
                    <li>‚úÖ Dynamic Module Generator - Generates executable code from workflows</li>
                    <li>‚úÖ Enhanced LLM Runner - Handles AI model interactions</li>
                    <li>‚úÖ Real-time Streaming - Provides live callback functionality</li>
                    <li>‚úÖ Workflow Automation - Shell, HTTP, and Decision runners</li>
                    <li>‚úÖ Database Integration - SQLite/PostgreSQL support</li>
                    <li>‚úÖ REST API - Full API for workflow management</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000';

        async function testHealth() {
            const resultDiv = document.getElementById('health-result');
            const icon = document.getElementById('health-icon');
            
            icon.innerHTML = '<div class="loading"></div>';
            resultDiv.style.display = 'block';
            resultDiv.className = 'api-test';
            resultDiv.innerHTML = 'Testing health endpoint...';

            try {
                const response = await fetch(`${API_BASE}/health`);
                const data = await response.json();
                
                resultDiv.className = 'api-test success';
                resultDiv.innerHTML = `
                    <strong>Health Check: SUCCESS</strong><br>
                    Status: ${data.status}<br>
                    Service: ${data.service || 'process_13'}
                `;
                icon.innerHTML = '‚úÖ';
            } catch (error) {
                resultDiv.className = 'api-test error';
                resultDiv.innerHTML = `
                    <strong>Health Check: FAILED</strong><br>
                    Error: ${error.message}
                `;
                icon.innerHTML = '‚ùå';
            }
        }

        async function testFeatures() {
            const resultDiv = document.getElementById('features-result');
            const icon = document.getElementById('features-icon');
            
            icon.innerHTML = '<div class="loading"></div>';
            resultDiv.style.display = 'block';
            resultDiv.className = 'api-test';
            resultDiv.innerHTML = 'Testing features endpoint...';

            try {
                const response = await fetch(`${API_BASE}/test`);
                const data = await response.json();
                
                resultDiv.className = 'api-test success';
                resultDiv.innerHTML = `
                    <strong>Features Test: SUCCESS</strong><br>
                    Message: ${data.message}<br>
                    Available Features:<br>
                    ${data.features.map(f => `‚Ä¢ ${f}`).join('<br>')}
                `;
                icon.innerHTML = '‚úÖ';
            } catch (error) {
                resultDiv.className = 'api-test error';
                resultDiv.innerHTML = `
                    <strong>Features Test: FAILED</strong><br>
                    Error: ${error.message}
                `;
                icon.innerHTML = '‚ùå';
            }
        }

        async function testAPI() {
            const resultDiv = document.getElementById('api-result');
            const icon = document.getElementById('api-icon');
            
            icon.innerHTML = '<div class="loading"></div>';
            resultDiv.style.display = 'block';
            resultDiv.className = 'api-test';
            resultDiv.innerHTML = 'Testing API endpoints...';

            try {
                const response = await fetch(`${API_BASE}/`);
                const data = await response.json();
                
                resultDiv.className = 'api-test success';
                resultDiv.innerHTML = `
                    <strong>API Test: SUCCESS</strong><br>
                    Message: ${data.message}<br>
                    Status: ${data.status}
                `;
                icon.innerHTML = '‚úÖ';
            } catch (error) {
                resultDiv.className = 'api-test error';
                resultDiv.innerHTML = `
                    <strong>API Test: FAILED</strong><br>
                    Error: ${error.message}
                `;
                icon.innerHTML = '‚ùå';
            }
        }

        async function runDemo(type) {
            const resultDiv = document.getElementById('demo-result');
            
            resultDiv.style.display = 'block';
            resultDiv.className = 'api-test';
            resultDiv.innerHTML = `Running ${type} demo...`;

            try {
                // Simulate demo execution
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                resultDiv.className = 'api-test success';
                resultDiv.innerHTML = `
                    <strong>${type.charAt(0).toUpperCase() + type.slice(1)} Demo: SUCCESS</strong><br>
                    Demo completed successfully! Check the terminal for detailed output.
                `;
            } catch (error) {
                resultDiv.className = 'api-test error';
                resultDiv.innerHTML = `
                    <strong>Demo: FAILED</strong><br>
                    Error: ${error.message}
                `;
            }
        }

        // Auto-test on page load
        window.addEventListener('load', () => {
            setTimeout(testHealth, 1000);
        });
    </script>
</body>
</html>