<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Engine - User Profile System Preview</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #50e3c2;
            --bg-color: #f4f7f9;
            --panel-bg-color: #ffffff;
            --text-color: #34495e;
            --text-light-color: #7f8c8d;
            --border-color: #e1e4e8;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1, h2, h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        
        h1 {
            font-size: 2.5rem;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-bottom: 2rem;
        }
        
        h2 {
            font-size: 1.8rem;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--secondary-color);
            padding-left: 15px;
        }

        .card {
            background-color: var(--panel-bg-color);
            border-radius: 8px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        pre {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 6px;
            overflow-x: auto;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 0.9rem;
        }
        
        code {
            font-family: 'Fira Code', 'Courier New', monospace;
        }

        .mermaid {
            text-align: center;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }
        
        /* UI Preview Styles */
        .ui-preview-container {
            background-color: #e8eaed;
            padding: 2rem;
            border-radius: 8px;
        }
        
        .ui-window {
            background-color: var(--panel-bg-color);
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: flex;
            min-height: 500px;
        }
        
        .ui-sidebar {
            width: 220px;
            background-color: #34495e;
            color: #ecf0f1;
            padding: 20px;
            flex-shrink: 0;
        }
        
        .ui-sidebar h3 {
            color: white;
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }
        
        .ui-nav a {
            display: block;
            color: #bdc3c7;
            text-decoration: none;
            padding: 12px 15px;
            border-radius: 5px;
            margin-bottom: 5px;
            transition: background-color 0.2s;
        }
        
        .ui-nav a:hover {
            background-color: #4a627a;
            color: white;
        }
        
        .ui-nav a.active {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
        }
        
        .ui-main {
            flex-grow: 1;
            padding: 2rem;
        }
        
        .ui-main h2 {
            margin-top: 0;
            font-size: 1.5rem;
        }
        
        .profile-card {
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            padding: 20px;
            border-radius: 6px;
        }
        
        .profile-field {
            margin-bottom: 15px;
        }
        
        .profile-field label {
            display: block;
            font-size: 0.9rem;
            color: var(--text-light-color);
            margin-bottom: 5px;
        }
        
        .profile-field .value {
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        .role-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 5px;
        }
        
        .role-editor { background-color: #eaf4fc; color: #3498db; }
        .role-admin { background-color: #fbeae5; color: #e74c3c; }
        
        .admin-section {
            margin-top: 2rem;
            border-top: 2px dashed var(--border-color);
            padding-top: 2rem;
        }
        
        .admin-section h3 {
            color: var(--danger-color);
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>AI Engine User Profile System</h1>

        <div class="card">
            <p>This document provides a preview of the user profile system for the AI Engine. It covers the data models, authentication flow, and a visual mock-up of the user interface, demonstrating how different roles see different information.</p>
        </div>

        <h2>1. User Profile Data Models</h2>
        <div class="card">
            <p>The system uses three core models to manage users, roles, and multi-tenancy. This structure ensures secure, isolated, and permission-based access to the platform's features.</p>
            <div class="grid">
                <div>
                    <h3>User Model</h3>
                    <pre><code>class User(SQLModel, table=True):
    id: Optional[int]
    username: str
    email: str
    hashed_password: str
    full_name: Optional[str]
    disabled: bool
    tenant_id: int
    roles: List["Role"]
    preferences: Dict</code></pre>
                </div>
                <div>
                    <h3>Role Model</h3>
                    <pre><code>class Role(SQLModel, table=True):
    id: Optional[int]
    name: str
    description: Optional[str]
    permissions: List[str]</code></pre>
                </div>
                <div>
                    <h3>Tenant Model</h3>
                    <pre><code>class Tenant(SQLModel, table=True):
    id: Optional[int]
    name: str
    display_name: Optional[str]
    active: bool</code></pre>
                </div>
            </div>
            <h3>Model Relationships</h3>
            <div class="mermaid">
                graph TD
                    User -- "belongs to" --> Tenant;
                    User -- "has many" --> UserRole;
                    Role -- "has many" --> UserRole;
            </div>
        </div>

        <h2>2. Authentication & Authorization Flow</h2>
        <div class="card">
            <p>Authentication is handled via JWT (JSON Web Tokens). A user registers, logs in to receive a token, and then includes this token in the header of all subsequent API requests to access protected resources. The backend validates the token and checks the user's roles and permissions for authorization.</p>
            <div class="mermaid">
                sequenceDiagram
                    participant User
                    participant API
                    User->>API: POST /api/register (Create account)
                    API-->>User: Success (201 Created)
                    User->>API: POST /api/token (Login with credentials)
                    API-->>User: JWT Access Token
                    User->>API: GET /api/users/me (Header: "Authorization: Bearer [TOKEN]")
                    API-->>User: User Profile Data
            </div>
        </div>

        <h2>3. User Profile Interface Preview</h2>
        <div class="card">
            <p>The user interface adapts based on the logged-in user's roles. An 'admin' user will see more options and information than a standard 'editor' user, demonstrating Role-Based Access Control (RBAC).</p>
            
            <div class="ui-preview-container">
                <h3>Preview: Standard User ('editor' role)</h3>
                <div class="ui-window">
                    <aside class="ui-sidebar">
                        <h3>AI Engine</h3>
                        <nav class="ui-nav">
                            <a href="#">Dashboard</a>
                            <a href="#">Workflows</a>
                            <a href="#" class="active">My Profile</a>
                            <a href="#">Settings</a>
                        </nav>
                    </aside>
                    <main class="ui-main">
                        <h2>My Profile</h2>
                        <div class="profile-card">
                            <div class="profile-field">
                                <label>Username</label>
                                <div class="value">editor_user</div>
                            </div>
                            <div class="profile-field">
                                <label>Email</label>
                                <div class="value">editor@example.com</div>
                            </div>
                            <div class="profile-field">
                                <label>Full Name</label>
                                <div class="value">Jane Doe</div>
                            </div>
                            <div class="profile-field">
                                <label>Roles</label>
                                <div class="value">
                                    <span class="role-badge role-editor">editor</span>
                                </div>
                            </div>
                            <div class="profile-field">
                                <label>Tenant</label>
                                <div class="value">Tenant 1</div>
                            </div>
                        </div>
                    </main>
                </div>
            </div>

            <div class="ui-preview-container" style="margin-top: 2rem;">
                <h3>Preview: Admin User ('admin' role)</h3>
                <div class="ui-window">
                    <aside class="ui-sidebar">
                        <h3>AI Engine</h3>
                        <nav class="ui-nav">
                            <a href="#">Dashboard</a>
                            <a href="#">Workflows</a>
                            <a href="#" class="active">My Profile</a>
                            <a href="#">Settings</a>
                            <a href="#" style="color: var(--danger-color); font-weight: bold;">Admin Panel</a>
                        </nav>
                    </aside>
                    <main class="ui-main">
                        <h2>My Profile</h2>
                        <div class="profile-card">
                            <div class="profile-field">
                                <label>Username</label>
                                <div class="value">admin_user</div>
                            </div>
                            <div class="profile-field">
                                <label>Email</label>
                                <div class="value">admin@example.com</div>
                            </div>
                            <div class="profile-field">
                                <label>Full Name</label>
                                <div class="value">John Admin</div>
                            </div>
                            <div class="profile-field">
                                <label>Roles</label>
                                <div class="value">
                                    <span class="role-badge role-admin">admin</span>
                                    <span class="role-badge role-editor">editor</span>
                                </div>
                            </div>
                            <div class="profile-field">
                                <label>Tenant</label>
                                <div class="value">Tenant 1</div>
                            </div>
                        </div>
                        
                        <div class="admin-section">
                            <h3>Administrator Controls</h3>
                            <p>As an admin, you have access to additional system management features.</p>
                            <ul>
                                <li>Manage Users</li>
                                <li>Manage Tenants</li>
                                <li>View System-wide Audit Logs</li>
                            </ul>
                        </div>
                    </main>
                </div>
            </div>

        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>

</body>
</html>
